<!DOCTYPE html>
<html>
  <head>
    <title>New Opportunity Notification</title>
  </head>
  <body
    style="
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      padding: 20px;
    "
  >
    <div
      style="
        max-width: 600px;
        margin: auto;
        background-color: #ffffff;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      "
    >
      <h2 style="color: #2c3e50; margin-top: 0">ðŸš€ New Opportunity Found</h2>

      <p style="font-size: 16px">
        <strong
          >{{ opportunity.created_by.first_name }} {{
          opportunity.created_by.last_name }}</strong
        >
        just found a new opportunity.
      </p>

      <p style="font-size: 16px">Here are the details:</p>

      <table style="font-size: 15px; margin: 15px 0 25px 0">
        <tr>
          <td style="font-weight: bold; padding: 4px 10px 4px 0">Title:</td>
          <td>{{ opportunity.title }}</td>
        </tr>
        <tr>
          <td style="font-weight: bold; padding: 4px 10px 4px 0">Donor:</td>
          <td>{{ opportunity.funding_agency.name }}</td>
        </tr>
        <tr>
          <td style="font-weight: bold; padding: 4px 10px 4px 0">Type:</td>
          <td>{{ opportunity.get_opp_type_display }}</td>
        </tr>
      </table>

      <p>
        <!-- Replace modern CSS button with table-based button that's more compatible with email clients -->
        <table border="0" cellspacing="0" cellpadding="0" style="margin: 0; border-collapse: separate;">
          <tr>
            <td align="center" bgcolor="#1a73e8" style="border-radius: 4px; padding: 0;">
              <a
                href="{{ opportunity_url }}"
                target="_blank"
                style="
                  font-family: Arial, sans-serif;
                  font-size: 16px;
                  font-weight: bold;
                  color: #ffffff;
                  text-decoration: none;
                  display: inline-block;
                  padding: 12px 20px;
                  border: 1px solid #1a73e8;
                "
              >
                View Opportunity
              </a>
            </td>
          </tr>
        </table>
      </p>
      
      <!-- Add fallback raw URL for better email forwarding compatibility -->
      <p style="font-size: 12px; color: #666666; margin-top: 10px;">
        If the button above doesn't work, copy and paste this URL into your browser:<br>
        <a href="{{ opportunity_url }}" style="word-break: break-all;">{{ opportunity_url }}</a>
      </p>

      <p style="font-size: 15px; margin-top: 40px">
        Best regards,<br />
        Opportunity Tracker
      </p>
    </div>
  </body>
</html>
